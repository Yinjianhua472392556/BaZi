<!--index.wxml-->
<view class="container">
  <!-- 顶部背景插画区域 -->
  <view class="header-illustration">
    <view class="illustration-content">
      <!-- 中国风装饰元素 -->
      <view class="cloud cloud-1"></view>
      <view class="cloud cloud-2"></view>
      <view class="mountain mountain-1"></view>
      <view class="mountain mountain-2"></view>
      <!-- 亭台楼阁 -->
      <view class="pavilion">
        <view class="pavilion-roof"></view>
        <view class="pavilion-body"></view>
        <view class="pavilion-pillars">
          <view class="pillar"></view>
          <view class="pillar"></view>
          <view class="pillar"></view>
        </view>
      </view>
      <!-- 静坐人物 -->
      <view class="character">
        <view class="character-body"></view>
        <view class="character-head"></view>
      </view>
    </view>
  </view>

  <!-- 主要内容区域 -->
  <view class="main-content">
    <view class="page-title">八字运势测算</view>
    
    <view class="card">
    <view class="subtitle">请输入您的出生信息</view>
    
    <!-- 日历类型选择 -->
    <view class="input-group">
      <label class="input-label">日期类型</label>
      <radio-group bindchange="onCalendarTypeChange">
        <label class="radio-item">
          <radio value="solar" checked="{{calendarType === 'solar'}}" color="#40E0D0"/>
          公历
        </label>
        <label class="radio-item">
          <radio value="lunar" checked="{{calendarType === 'lunar'}}" color="#40E0D0"/>
          农历
        </label>
      </radio-group>
    </view>

    <!-- 出生日期选择 -->
    <view class="input-group">
      <label class="input-label">出生日期</label>
      <picker mode="date" value="{{birthDate}}" start="1900-01-01" end="{{maxDate}}" bindchange="onDateChange">
        <view class="picker">
          {{birthDate || (calendarType === 'solar' ? '请选择公历出生日期' : '请选择农历出生日期')}}
        </view>
      </picker>
      <view class="date-type-hint">
        {{calendarType === 'solar' ? '选择公历日期（如：1990-01-15）' : '选择农历日期（请按对应公历日期选择）'}}
      </view>
    </view>

    <!-- 出生时间选择 -->
    <view class="input-group">
      <label class="input-label">出生时间</label>
      <picker mode="time" value="{{birthTime}}" bindchange="onTimeChange">
        <view class="picker">
          {{birthTime || '请选择出生时间'}}
        </view>
      </picker>
    </view>

    <!-- 性别选择 -->
    <view class="input-group">
      <label class="input-label">性别</label>
      <radio-group bindchange="onGenderChange">
        <label class="radio-item">
          <radio value="male" checked="{{gender === 'male'}}" color="#40E0D0"/>
          男
        </label>
        <label class="radio-item">
          <radio value="female" checked="{{gender === 'female'}}" color="#40E0D0"/>
          女
        </label>
      </radio-group>
    </view>

    <!-- 测算按钮 -->
    <button class="btn-primary" 
            bindtap="calculateBazi" 
            disabled="{{!canCalculate}}"
            loading="{{calculating}}">
      {{calculating ? '正在测算中...' : '开始测算'}}
    </button>
  </view>

    <!-- 快速入口 -->
    <view class="card">
      <view class="subtitle">快速功能</view>
      <view class="quick-actions">
        <navigator url="/pages/history/history" class="quick-item">
          <view class="quick-icon">📜</view>
          <text>历史记录</text>
        </navigator>
      </view>
    </view>

    <!-- 免责声明 -->
    <view class="disclaimer">
      本测算结果仅供娱乐参考，不可作为人生决策依据。
      请理性对待，切勿迷信。
    </view>
  </view>
</view>
