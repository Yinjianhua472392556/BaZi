<!--festival.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨èƒŒæ™¯æ’ç”»åŒºåŸŸ -->
  <view class="header-illustration">
    <view class="illustration-content">
      <!-- ä¸­å›½é£è£…é¥°å…ƒç´  -->
      <view class="cloud cloud-1"></view>
      <view class="cloud cloud-2"></view>
      <view class="mountain mountain-1"></view>
      <view class="mountain mountain-2"></view>
      
      <!-- æ–°å¢è£…é¥°å…ƒç´  -->
      <view class="lantern lantern-left"></view>
      <view class="lantern lantern-right"></view>
      <view class="star star-1"></view>
      <view class="star star-2"></view>
      <view class="star star-3"></view>
      <view class="moon"></view>
      
      <!-- é¡µé¢æ ‡é¢˜ -->
      <view class="page-title-container">
        <view class="page-title">æœ€è¿‘èŠ‚æ—¥</view>
        <view class="page-subtitle">æœªæ¥13ä¸ªæœˆ Â· é»„å†å®œå¿Œ</view>
      </view>
      
      <!-- æ›´æ–°æ—¶é—´ -->
      <view wx:if="{{lastUpdateTime}}" class="update-time">
        æœ€åæ›´æ–°ï¼š{{lastUpdateTime}}
      </view>
    </view>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½èŠ‚æ—¥æ•°æ®ä¸­...</text>
    </view>

    <!-- é”™è¯¯çŠ¶æ€ -->
    <view wx:elif="{{error}}" class="error-container">
      <view class="error-icon">âš ï¸</view>
      <text class="error-text">{{error}}</text>
      <button class="retry-button" bindtap="onRetry">é‡è¯•</button>
    </view>

    <!-- èŠ‚æ—¥åˆ—è¡¨ -->
    <view wx:elif="{{festivals.length > 0}}" class="festival-list">
      <view 
        wx:for="{{festivals}}" 
        wx:key="id" 
        class="festival-card"
        data-festival="{{item}}"
        bindtap="onFestivalTap"
      >
        <!-- è£…é¥°è§’ -->
        <view class="corner-decoration top-left"></view>
        <view class="corner-decoration top-right"></view>
        <view class="corner-decoration bottom-left"></view>
        <view class="corner-decoration bottom-right"></view>
        <!-- èŠ‚æ—¥åç§°è£…é¥°è¾¹æ¡† -->
        <view class="festival-header">
          <view 
            class="festival-name-border {{item.type}}"
            style="border-color: {{item.decoration.borderColor}}; background-color: {{item.decoration.backgroundColor}};"
          >
            <text 
              class="festival-name"
              style="color: {{item.decoration.textColor}};"
            >
              {{item.name}}
            </text>
          </view>
        </view>
        
        <!-- æ—¥æœŸä¿¡æ¯ -->
        <view class="date-info">
          <view class="lunar-date">{{item.lunarDate}}</view>
          <view class="solar-date">{{item.date}}</view>
          <view class="day-of-week">{{item.dayOfWeek}}</view>
          <view class="countdown">{{item.countdownText}}</view>
        </view>
        
        <!-- ä¼ ç»Ÿä¿¡æ¯ -->
        <view class="traditional-info">
          <view class="info-row">
            <view class="info-item">
              <text class="info-label">å€¼ç¥</text>
              <text class="info-value">{{item.ganZhi}}</text>
            </view>
            <view class="info-item">
              <text class="info-label">åäºŒç¥</text>
              <text class="info-value">{{item.shierShen}}</text>
            </view>
          </view>
          <view class="info-row">
            <view class="info-item full-width">
              <text class="info-label">æ˜Ÿå®¿</text>
              <text class="info-value">{{item.xingXiu}}</text>
            </view>
          </view>
        </view>
        
        <!-- å®œå¿Œæ´»åŠ¨ -->
        <view class="activities">
          <view class="activity-row">
            <view class="activity-label suitable">å®œ</view>
            <view class="activity-content">
              <text 
                wx:for="{{item.activities.suitable}}" 
                wx:for-item="activity"
                wx:key="*this" 
                class="activity-item"
              >
                {{activity}}
              </text>
            </view>
          </view>
          <view class="activity-row">
            <view class="activity-label unsuitable">å¿Œ</view>
            <view class="activity-content">
              <text 
                wx:for="{{item.activities.unsuitable}}" 
                wx:for-item="activity"
                wx:key="*this" 
                class="activity-item"
              >
                {{activity}}
              </text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-container">
      <view class="empty-icon">ğŸ“…</view>
      <text class="empty-text">æš‚æ— èŠ‚æ—¥æ•°æ®</text>
      <button class="retry-button" bindtap="onRetry">é‡æ–°åŠ è½½</button>
    </view>

    <!-- åº•éƒ¨è¯´æ˜ -->
    <view wx:if="{{festivals.length > 0}}" class="disclaimer">
      <text class="disclaimer-text">
        * èŠ‚æ—¥æ•°æ®åŸºäºåŠ¨æ€å†æ³•è®¡ç®—ï¼Œç¡®ä¿é•¿æœŸå‡†ç¡®æ€§è‡³2035å¹´ï¼Œå®œå¿Œå†…å®¹ä»…ä¾›å‚è€ƒ
      </text>
    </view>
  </view>
</view>
