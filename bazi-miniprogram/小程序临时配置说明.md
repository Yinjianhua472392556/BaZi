# 🚀 小程序临时配置说明

## 📱 当前配置状态

### ✅ 已完成的配置修改
1. **API地址已更新**：`app.js` 中的 `apiBaseUrl` 已修改为 `http://119.91.146.128:8001`
2. **开发调试模式**：`project.config.json` 中 `urlCheck: false` 允许IP访问
3. **备案期间临时方案**：保留原域名注释，便于备案后恢复

## 🔧 小程序后台配置

### 1. 微信公众平台配置
如果在真机上遇到网络请求问题，需要在微信公众平台配置：

1. **登录微信公众平台**：[https://mp.weixin.qq.com](https://mp.weixin.qq.com)
2. **进入开发管理** → **开发设置** → **服务器域名**
3. **配置request合法域名**：
   ```
   http://119.91.146.128
   ```

### 2. 开发者工具配置
1. **详情** → **项目配置** → **不校验合法域名** ✅
2. 这样可以直接使用IP地址进行开发调试

## 🧪 测试方法

### 1. 开发者工具测试
```javascript
// 在控制台执行测试
const app = getApp();
app.request({
  url: '/health',
  success: (data) => {
    console.log('API连接成功:', data);
  },
  fail: (err) => {
    console.error('API连接失败:', err);
  }
});
```

### 2. 真机测试
1. **预览/真机调试**：扫码在手机上测试
2. **检查网络请求**：观察是否正常获取数据
3. **验证功能**：测试八字计算、起名等功能

## 🔄 备案完成后恢复

### 修改步骤
1. **打开 `app.js`**
2. **修改 `apiBaseUrl`**：
   ```javascript
   // 恢复为正式域名
   apiBaseUrl: 'https://api.bazi365.top',
   ```
3. **删除临时注释**
4. **重新提交审核**

### 微信公众平台配置
1. **修改服务器域名**：
   ```
   https://api.bazi365.top
   ```
2. **删除临时IP配置**

## 🚨 注意事项

### 开发期间
- ✅ 使用开发者工具调试正常
- ⚠️ 真机测试可能需要配置域名白名单
- 📱 部分功能在真机上可能受限

### 生产环境
- 🔒 必须使用HTTPS域名
- 📝 必须完成域名备案
- ✅ 需要在微信公众平台配置合法域名

## 🎯 当前可测试的功能

### ✅ 完全可用
- 八字计算API
- 起名算法API
- 生肖配对API
- 节日查询API
- 所有后端逻辑

### ⚠️ 可能受限
- 真机网络请求（需要域名白名单）
- 小程序审核提交（需要正式域名）

## 📞 技术支持

**当前服务状态**：
- **API服务**：100% 可用
- **IP访问**：`http://119.91.146.128:8001/health`
- **功能测试**：全部正常

**问题排查**：
- 查看小程序控制台日志
- 检查网络请求返回状态
- 验证API服务健康状态

---
**更新时间**：2025-10-11  
**生效范围**：开发调试期间  
**恢复时机**：域名备案完成后
